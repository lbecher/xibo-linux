#!/bin/bash

set -e

# Atualizar cache de ícones do desktop
if [ -x /usr/bin/update-desktop-database ]; then
    /usr/bin/update-desktop-database -q /usr/share/applications
fi

# Atualizar cache de ícones
if [ -x /usr/bin/update-icon-caches ]; then
    /usr/bin/update-icon-caches /usr/share/icons/hicolor
fi

# Atualizar cache MIME
if [ -x /usr/bin/update-mime-database ]; then
    /usr/bin/update-mime-database /usr/share/mime
fi

# Criar diretório de logs se não existir
mkdir -p /var/log/xibo

# Definir permissões apropriadas
chown -R root:root /usr/bin/xibo-*
chmod +x /usr/bin/xibo-*

echo "Xibo Player instalado com sucesso!"
echo "Para iniciar o player, execute: xibo-player"
echo "Para configurar, execute: xibo-options"

exit 0
